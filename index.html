<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duck√©mon: Micro-Pixel</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { 
            --grass: #2d5a27; --water: #1a3c5e; --sand: #c2b280; --void: #1a1a1a;
            --p-yellow: #f1c40f;
        }
        
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; font-family: 'Press Start 2P', cursive; color: #fff; overflow: hidden; image-rendering: pixelated; }

        /* --- MICROTAL WORLD ENGINE --- */
        #viewport { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
        #world { position: absolute; transition: transform 0.12s ease-out; }
        
        /* High-detail pixel tiles */
        .tile { width: 40px; height: 40px; position: absolute; }
        .t-0 { background: var(--grass); box-shadow: inset 2px 2px 0 #3a6b34, inset -2px -2px 0 #244a1f; }
        .t-1 { background: var(--water); box-shadow: inset 0 4px 0 #2980b9; }
        .t-2 { background: var(--sand); box-shadow: inset 2px 2px 0 #d4c590; }
        .t-3 { background: #333; box-shadow: inset 0 0 10px #00ecff; }

        /* --- TINY PIXEL DUCK --- */
        .pixel-duck {
            width: 4px; height: 4px; background: transparent;
            box-shadow: 
                8px 4px 0 var(--c), 12px 4px 0 var(--c),
                8px 8px 0 var(--c), 12px 8px 0 var(--c), 16px 8px 0 #e67e22,
                4px 12px 0 var(--c), 8px 12px 0 var(--c), 12px 12px 0 var(--c),
                12px 4px 0 #000; /* Eye */
            position: absolute; transform: scale(2.5);
        }

        .nameplate {
            position: absolute; width: 120px; text-align: center;
            font-size: 6px; bottom: 25px; left: -45px;
            background: rgba(0,0,0,0.7); padding: 4px; border-radius: 2px;
            pointer-events: none; white-space: nowrap;
        }

        #player-container { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); z-index: 100; }

        /* --- BATTLE SCREEN --- */
        .screen { display: none; position: absolute; inset: 0; z-index: 1000; background: #111; flex-direction: column; align-items: center; justify-content: center; }
        .battle-stage { display: flex; justify-content: space-around; width: 100%; margin-bottom: 40px; }
        
        .hp-box { background: #eee; color: #000; padding: 10px; border: 3px solid #000; min-width: 150px; font-size: 7px; }
        .hp-bar { width: 100%; height: 8px; background: #ccc; margin-top: 5px; border: 1px solid #000; }
        .hp-fill { height: 100%; background: #2ecc71; width: 100%; transition: 0.4s; }

        /* --- HUD --- */
        #hud { position: absolute; bottom: 0; width: 100%; background: #000; padding: 15px; display: flex; justify-content: space-around; z-index: 500; border-top: 2px solid #333; font-size: 8px; }
        .btn { font-family: 'Press Start 2P'; padding: 10px; border: 3px solid #fff; background: #000; color: #fff; cursor: pointer; font-size: 8px; }
        .btn:hover { background: #333; }
    </style>
</head>
<body onload="init()">

<div id="viewport">
    <div id="world"></div>
    <div id="player-container">
        <div class="nameplate">P1: <span id="p-name-tag">HERO</span> [LV:<span id="p-lvl-tag">1</span>]
