<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duck Quest: Boss Edition</title>
    <style>
        :root { --water: #4cc9f0; --grass: #b5e48c; --gold: #ffb703; --boss: #e63946; }
        body { font-family: 'Courier New', Courier, monospace; background: #222; color: white; text-align: center; margin: 0; overflow: hidden; }
        
        #ui-bar { background: #333; padding: 15px; display: flex; justify-content: space-around; border-bottom: 4px solid var(--water); }
        .stat-box { font-weight: bold; font-size: 1.2rem; }
        
        #game-world { position: relative; width: 90vw; height: 55vh; background: var(--water); margin: 20px auto; border-radius: 20px; border: 8px solid #0077b6; overflow: hidden; }
        .boss-active { background: var(--boss) !important; border-color: #780000 !important; animation: shake 0.5s infinite; }

        @keyframes shake { 0% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -2px); } 100% { transform: translate(1px, 1px); } }

        .duck, .boss { position: absolute; cursor: pointer; user-select: none; transition: transform 0.1s; }
        .duck { font-size: 50px; }
        .boss { font-size: 150px; filter: drop-shadow(0 0 10px black); }

        #boss-hp-container { display: none; width: 80%; background: #555; height: 30px; margin: 10px auto; border-radius: 15px; border: 2px solid white; }
        #boss-hp-fill { background: #ff0000; width: 100%; height: 100%; border-radius: 15px; transition: width 0.2s; }

        #shop { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }
        .btn { background: var(--gold); border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div id="ui-bar">
        <div>‚≠ê Lvl: <span id="lvl">1</span></div>
        <div>üçû Bread: <span id="bread">0</span></div>
        <div>üìà XP: <span id="xp">0</span>/<span id="next-lvl">10</span></div>
    </div>

    <h2 id="status-msg">Quack to get Bread!</h2>
    
    <div id="boss-hp-container"><div id="boss-hp-fill"></div></div>

    <div id="game-world"></div>

    <div id="shop">
        <button class="btn" onclick="buyUpgrade('click')">Net (+1 Click) - 15ü•ñ</button>
        <button class="btn" onclick="buyUpgrade('auto')">Auto-Trap - 60ü•ñ</button>
    </div>

    <script>
        let stats = { bread: 0, xp: 0, lvl: 1, xpToNext: 10, clickPower: 1, isBossMode: false };
        const world = document.getElementById('game-world');

        function updateUI() {
            document.getElementById('bread').innerText = stats.bread;
            document.getElementById('xp').innerText = stats.xp;
            document.getElementById('lvl').innerText = stats.lvl;
            document.getElementById('next-lvl').innerText = stats.xpToNext;
        }

        function createDuck() {
            if (stats.isBossMode) return;
            const duck = document.createElement('div');
            duck.className = 'duck';
            duck.innerHTML = 'ü¶Ü';
            duck.style.left = Math.random() * 80 + '%';
            duck.style.top = Math.random() * 80 + '%';

            duck.onclick = () => {
                gainXP(stats.clickPower);
                stats.bread += Math.floor(Math.random() * 3) + 1;
                duck.remove();
                updateUI();
            };
            world.appendChild(duck);
            setTimeout(() => duck.remove(), 2000);
        }

        function gainXP(amount) {
            stats.xp += amount;
            if (stats.xp >= stats.xpToNext) {
                stats.lvl++;
                stats.xp = 0;
                stats.xpToNext *= 2;
                if (stats.lvl % 5 === 0) startBossBattle();
            }
            updateUI();
        }

        function startBossBattle() {
            stats.isBossMode = true;
            world.classList.add('boss-active');
            document.getElementById('status-msg').innerText = "‚ö†Ô∏è ELITE SWAN ATTACKING! ‚ö†Ô∏è";
            document.getElementById('boss-hp-container').style.display = "block";
            
            let bossHP = 100 + (stats.lvl * 10);
            let currentHP = bossHP;
            
            const boss = document.createElement('div');
            boss.className = 'boss';
            boss.innerHTML = 'ü¶¢';
            boss.style.left = '35%';
            boss.style.top = '20%';
            
            boss.onclick = () => {
                currentHP -= stats.clickPower * 5;
                let pct = (currentHP / bossHP) * 100;
                document.getElementById('boss-hp-fill').style.width = pct + '%';
                
                if (currentHP <= 0) {
                    stats.isBossMode = false;
                    stats.bread += 100;
                    world.classList.remove('boss-active');
                    document.getElementById('boss-hp-container').style.display = "none";
                    document.getElementById('status-msg').innerText = "Boss Defeated! +100 Bread";
                    boss.remove();
                }
            };
            world.appendChild(boss);
        }

        function buyUpgrade(type) {
            if (type === 'click' && stats.bread >= 15) {
                stats.bread -= 15;
                stats.clickPower++;
            } else if (type === 'auto' && stats.bread >= 60) {
                stats.bread -= 60;
                setInterval(() => { if(!stats.isBossMode) gainXP(1); }, 2000);
            }
            updateUI();
        }

        setInterval(createDuck, 1000);
    </script>
</body>
</html>
